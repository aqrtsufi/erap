import{i as e,t}from"./rolldown-runtime-qoKsgQi2.js";var n=`modulepreload`,r=function(e){return`/erap/`+e},i={};const a=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),s=document.querySelector(`meta[property=csp-nonce]`),c=s?.nonce||s?.getAttribute(`nonce`);function l(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}o=l(t.map(t=>{if(t=r(t,a),t in i)return;i[t]=!0;let o=t.endsWith(`.css`),s=o?`[rel="stylesheet"]`:``;if(a)for(let n=e.length-1;n>=0;n--){let r=e[n];if(r.href===t&&(!o||r.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;let l=document.createElement(`link`);if(l.rel=o?`stylesheet`:n,o||(l.as=`script`),l.crossOrigin=``,l.href=t,c&&l.setAttribute(`nonce`,c),document.head.appendChild(l),o)return new Promise((e,n)=>{l.addEventListener(`load`,e),l.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function s(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(let e of t||[])e.status===`rejected`&&s(e.reason);return e().catch(s)})};var o=t(((e,t)=>{t.exports={}})),s;function c(e,t,n){let r=typeof n,i=typeof e;if(r!==`undefined`){if(i!==`undefined`){if(n){if(i===`function`&&r===i)return function(t){return e(n(t))};if(t=e.constructor,t===n.constructor){if(t===Array)return n.concat(e);if(t===Map){var a=new Map(n);for(var o of e)a.set(o[0],o[1]);return a}if(t===Set){o=new Set(n);for(a of e.values())o.add(a);return o}}}return e}return n}return i===`undefined`?t:e}function l(e,t){return e===void 0?t:e}function u(){return Object.create(null)}function d(e){return typeof e==`string`}function f(e){return typeof e==`object`}function p(e,t){if(d(t))e=e[t];else for(let n=0;e&&n<t.length;n++)e=e[t[n]];return e}var m=/[^\p{L}\p{N}]+/u,h=/(\d{3})/g,g=/(\D)(\d{3})/g,_=/(\d{3})(\D)/g,v=/[\u0300-\u036f]/g;function y(e={}){if(!this||this.constructor!==y)return new y(...arguments);if(arguments.length)for(e=0;e<arguments.length;e++)this.assign(arguments[e]);else this.assign(e)}s=y.prototype,s.assign=function(e){this.normalize=c(e.normalize,!0,this.normalize);let t=e.include,n=t||e.exclude||e.split,r;if(n||n===``){if(typeof n==`object`&&n.constructor!==RegExp){let e=``;r=!t,t||(e+=`\\p{Z}`),n.letter&&(e+=`\\p{L}`),n.number&&(e+=`\\p{N}`,r=!!t),n.symbol&&(e+=`\\p{S}`),n.punctuation&&(e+=`\\p{P}`),n.control&&(e+=`\\p{C}`),(n=n.char)&&(e+=typeof n==`object`?n.join(``):n);try{this.split=RegExp(`[`+(t?`^`:``)+e+`]+`,`u`)}catch{this.split=/\s+/}}else this.split=n,r=n===!1||`a1a`.split(n).length<2;this.numeric=c(e.numeric,r)}else{try{this.split=c(this.split,m)}catch{this.split=/\s+/}this.numeric=c(e.numeric,c(this.numeric,!0))}if(this.prepare=c(e.prepare,null,this.prepare),this.finalize=c(e.finalize,null,this.finalize),n=e.filter,this.filter=typeof n==`function`?n:c(n&&new Set(n),null,this.filter),this.dedupe=c(e.dedupe,!0,this.dedupe),this.matcher=c((n=e.matcher)&&new Map(n),null,this.matcher),this.mapper=c((n=e.mapper)&&new Map(n),null,this.mapper),this.stemmer=c((n=e.stemmer)&&new Map(n),null,this.stemmer),this.replacer=c(e.replacer,null,this.replacer),this.minlength=c(e.minlength,1,this.minlength),this.maxlength=c(e.maxlength,1024,this.maxlength),this.rtl=c(e.rtl,!1,this.rtl),(this.cache=n=c(e.cache,!0,this.cache))&&(this.F=null,this.L=typeof n==`number`?n:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h=``,this.J=null,this.A=``,this.K=null,this.matcher)for(let e of this.matcher.keys())this.h+=(this.h?`|`:``)+e;if(this.stemmer)for(let e of this.stemmer.keys())this.A+=(this.A?`|`:``)+e;return this},s.addStemmer=function(e,t){return this.stemmer||=new Map,this.stemmer.set(e,t),this.A+=(this.A?`|`:``)+e,this.K=null,this.cache&&b(this),this},s.addFilter=function(e){return typeof e==`function`?this.filter=e:(this.filter||=new Set,this.filter.add(e)),this.cache&&b(this),this},s.addMapper=function(e,t){return typeof e==`object`?this.addReplacer(e,t):e.length>1?this.addMatcher(e,t):(this.mapper||=new Map,this.mapper.set(e,t),this.cache&&b(this),this)},s.addMatcher=function(e,t){return typeof e==`object`?this.addReplacer(e,t):e.length<2&&(this.dedupe||this.mapper)?this.addMapper(e,t):(this.matcher||=new Map,this.matcher.set(e,t),this.h+=(this.h?`|`:``)+e,this.J=null,this.cache&&b(this),this)},s.addReplacer=function(e,t){return typeof e==`string`?this.addMatcher(e,t):(this.replacer||=[],this.replacer.push(e,t),this.cache&&b(this),this)},s.encode=function(e,t){if(this.cache&&e.length<=this.H)if(this.F){if(this.B.has(e))return this.B.get(e)}else this.F=setTimeout(b,50,this);this.normalize&&(e=typeof this.normalize==`function`?this.normalize(e):v?e.normalize(`NFKD`).replace(v,``).toLowerCase():e.toLowerCase()),this.prepare&&(e=this.prepare(e)),this.numeric&&e.length>3&&(e=e.replace(g,`$1 $2`).replace(_,`$1 $2`).replace(h,`$1 `));let n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),r=[],i=u(),a,o,s=this.split||this.split===``?e.split(this.split):[e];for(let e=0,l,u;e<s.length;e++)if((l=u=s[e])&&!(l.length<this.minlength||l.length>this.maxlength)){if(t){if(i[l])continue;i[l]=1}else{if(a===l)continue;a=l}if(n)r.push(l);else if(!this.filter||(typeof this.filter==`function`?this.filter(l):!this.filter.has(l))){if(this.cache&&l.length<=this.I)if(this.F){var c=this.D.get(l);if(c||c===``){c&&r.push(c);continue}}else this.F=setTimeout(b,50,this);if(this.stemmer){this.K||=RegExp(`(?!^)(`+this.A+`)$`);let e;for(;e!==l&&l.length>2;)e=l,l=l.replace(this.K,e=>this.stemmer.get(e))}if(l&&(this.mapper||this.dedupe&&l.length>1)){c=``;for(let e=0,t=``,n,r;e<l.length;e++)n=l.charAt(e),n===t&&this.dedupe||((r=this.mapper&&this.mapper.get(n))||r===``?r===t&&this.dedupe||!(t=r)||(c+=r):c+=t=n);l=c}if(this.matcher&&l.length>1&&(this.J||=RegExp(`(`+this.h+`)`,`g`),l=l.replace(this.J,e=>this.matcher.get(e))),l&&this.replacer)for(c=0;l&&c<this.replacer.length;c+=2)l=l.replace(this.replacer[c],this.replacer[c+1]);if(this.cache&&u.length<=this.I&&(this.D.set(u,l),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),l){if(l!==u)if(t){if(i[l])continue;i[l]=1}else{if(o===l)continue;o=l}r.push(l)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&e.length<=this.H&&(this.B.set(e,r),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),r};function b(e){e.F=null,e.B.clear(),e.D.clear()}function x(e,t,n){n||(t||typeof e!=`object`?typeof t==`object`&&(n=t,t=0):n=e),n&&(e=n.query||e,t=n.limit||t);let r=``+(t||0);n&&(r+=(n.offset||0)+!!n.context+!!n.suggest+(n.resolve!==!1)+(n.resolution||this.resolution)+(n.boost||0)),e=(``+e).toLowerCase(),this.cache||=new S;let i=this.cache.get(e+r);if(!i){let a=n&&n.cache;a&&(n.cache=!1),i=this.search(e,t,n),a&&(n.cache=a),this.cache.set(e+r,i)}return i}function S(e){this.limit=e&&e!==!0?e:1e3,this.cache=new Map,this.h=``}S.prototype.set=function(e,t){this.cache.set(this.h=e,t),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},S.prototype.get=function(e){let t=this.cache.get(e);return t&&this.h!==e&&(this.cache.delete(e),this.cache.set(this.h=e,t)),t},S.prototype.remove=function(e){for(let t of this.cache){let n=t[0];t[1].includes(e)&&this.cache.delete(n)}},S.prototype.clear=function(){this.cache.clear(),this.h=``};var C={normalize:!1,numeric:!1,dedupe:!1},w={},T=new Map([[`b`,`p`],[`v`,`f`],[`w`,`f`],[`z`,`s`],[`x`,`s`],[`d`,`t`],[`n`,`m`],[`c`,`k`],[`g`,`k`],[`j`,`k`],[`q`,`k`],[`i`,`e`],[`y`,`e`],[`u`,`o`]]),E=new Map([[`ae`,`a`],[`oe`,`o`],[`sh`,`s`],[`kh`,`k`],[`th`,`t`],[`ph`,`f`],[`pf`,`f`]]),D=[/([^aeo])h(.)/g,`$1$2`,/([aeo])h([^aeo]|$)/g,`$1$2`,/(.)\1+/g,`$1`],O={a:``,e:``,i:``,o:``,u:``,y:``,b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6},k={Exact:C,Default:w,Normalize:w,LatinBalance:{mapper:T},LatinAdvanced:{mapper:T,matcher:E,replacer:D},LatinExtra:{mapper:T,replacer:D.concat([/(?!^)[aeo]/g,``]),matcher:E},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(e){for(let n=0;n<e.length;n++){var t=e[n];let r=t.charAt(0),i=O[r];for(let e=1,n;e<t.length&&(n=t.charAt(e),n===`h`||n===`w`||!(n=O[n])||n===i||(r+=n,i=n,r.length!==4));e++);e[n]=r}}},CJK:{split:``},LatinExact:C,LatinDefault:w,LatinSimple:w};function A(e,t,n,r){let i=[];for(let a=0,o;a<e.index.length;a++)if(o=e.index[a],t>=o.length)t-=o.length;else{t=o[r?`splice`:`slice`](t,n);let a=t.length;if(a&&(i=i.length?i.concat(t):t,n-=a,r&&(e.length-=a),!n))break;t=0}return i}function j(e){if(!this||this.constructor!==j)return new j(e);this.index=e?[e]:[],this.length=e?e.length:0;let t=this;return new Proxy([],{get(e,n){if(n===`length`)return t.length;if(n===`push`)return function(e){t.index[t.index.length-1].push(e),t.length++};if(n===`pop`)return function(){if(t.length)return t.length--,t.index[t.index.length-1].pop()};if(n===`indexOf`)return function(e){let n=0;for(let r=0,i,a;r<t.index.length;r++){if(i=t.index[r],a=i.indexOf(e),a>=0)return n+a;n+=i.length}return-1};if(n===`includes`)return function(e){for(let n=0;n<t.index.length;n++)if(t.index[n].includes(e))return!0;return!1};if(n===`slice`)return function(e,n){return A(t,e||0,n||t.length,!1)};if(n===`splice`)return function(e,n){return A(t,e||0,n||t.length,!0)};if(n===`constructor`)return Array;if(typeof n!=`symbol`)return(e=t.index[n/2**31|0])&&e[n]},set(e,n,r){return e=n/2**31|0,(t.index[e]||(t.index[e]=[]))[n]=r,t.length++,!0}})}j.prototype.clear=function(){this.index.length=0},j.prototype.push=function(){};function M(e=8){if(!this||this.constructor!==M)return new M(e);this.index=u(),this.h=[],this.size=0,e>32?(this.B=F,this.A=BigInt(e)):(this.B=P,this.A=e)}M.prototype.get=function(e){let t=this.index[this.B(e)];return t&&t.get(e)},M.prototype.set=function(e,t){var n=this.B(e);let r=this.index[n];r?(n=r.size,r.set(e,t),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[e,t]]),this.h.push(r),this.size++)};function N(e=8){if(!this||this.constructor!==N)return new N(e);this.index=u(),this.h=[],this.size=0,e>32?(this.B=F,this.A=BigInt(e)):(this.B=P,this.A=e)}N.prototype.add=function(e){var t=this.B(e);let n=this.index[t];n?(t=n.size,n.add(e),(t-=n.size)&&this.size++):(this.index[t]=n=new Set([e]),this.h.push(n),this.size++)},s=M.prototype,s.has=N.prototype.has=function(e){let t=this.index[this.B(e)];return t&&t.has(e)},s.delete=N.prototype.delete=function(e){let t=this.index[this.B(e)];t&&t.delete(e)&&this.size--},s.clear=N.prototype.clear=function(){this.index=u(),this.h=[],this.size=0},s.values=N.prototype.values=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].values())yield t},s.keys=N.prototype.keys=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].keys())yield t},s.entries=N.prototype.entries=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].entries())yield t};function P(e){let t=2**this.A-1;if(typeof e==`number`)return e&t;let n=0,r=this.A+1;for(let i=0;i<e.length;i++)n=(n*r^e.charCodeAt(i))&t;return this.A===32?n+2**31:n}function F(e){let t=BigInt(2)**this.A-BigInt(1);var n=typeof e;if(n===`bigint`)return e&t;if(n===`number`)return BigInt(e)&t;n=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<e.length;i++)n=(n*r^BigInt(e.charCodeAt(i)))&t;return n}var I,L;async function R(e){e=e.data;var t=e.task;let n=e.id,r=e.args;switch(t){case`init`:L=e.options||{},(t=e.factory)?(Function(`return `+t)()(self),I=new self.FlexSearch.Index(L),delete self.FlexSearch):I=new X(L),postMessage({id:n});break;default:let i;t===`export`&&(r[1]?(r[0]=L.export,r[2]=0,r[3]=1):r=null),t===`import`?r[0]&&(e=await L.import.call(I,r[0]),I.import(r[0],e)):((i=r&&I[t].apply(I,r))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),t===`search`&&i.result&&(i=i.result)),postMessage(t===`search`?{id:n,msg:i}:{id:n})}}function ee(e){z.call(e,`add`),z.call(e,`append`),z.call(e,`search`),z.call(e,`update`),z.call(e,`remove`),z.call(e,`searchCache`)}var te,ne,re;function ie(){te=re=0}function z(e){this[e+`Async`]=function(){let t=arguments;var n=t[t.length-1];let r;if(typeof n==`function`&&(r=n,delete t[t.length-1]),te?re||=Date.now()-ne>=this.priority*this.priority*3:(te=setTimeout(ie,0),ne=Date.now()),re){let n=this;return new Promise(r=>{setTimeout(function(){r(n[e+`Async`].apply(n,t))},0)})}let i=this[e].apply(this,t);return n=i.then?i:new Promise(e=>e(i)),r&&n.then(r),n}}var B=0;function V(e={},t){function n(n){function o(e){e=e.data||e;let t=e.id,n=t&&a.h[t];n&&(n(e.msg),delete a.h[t])}if(this.worker=n,this.h=u(),this.worker)return i?this.worker.on(`message`,o):this.worker.onmessage=o,e.config?new Promise(function(t){B>1e9&&(B=0),a.h[++B]=function(){t(a)},a.worker.postMessage({id:B,task:`init`,factory:r,options:e})}):(this.priority=e.priority||4,this.encoder=t||null,this.worker.postMessage({task:`init`,factory:r,options:e}),this)}if(!this||this.constructor!==V)return new V(e);let r=typeof self<`u`?self._factory:typeof window<`u`?window._factory:null;r&&=r.toString();let i=typeof window>`u`,a=this,o=ae(r,i,e.worker);return o.then?o.then(function(e){return n.call(a,e)}):n.call(this,o)}H(`add`),H(`append`),H(`search`),H(`update`),H(`remove`),H(`clear`),H(`export`),H(`import`),V.prototype.searchCache=x,ee(V.prototype);function H(e){V.prototype[e]=function(){let t=this,n=[].slice.call(arguments);var r=n[n.length-1];let i;return typeof r==`function`&&(i=r,n.pop()),r=new Promise(function(r){e===`export`&&typeof n[0]==`function`&&(n[0]=null),B>1e9&&(B=0),t.h[++B]=r,t.worker.postMessage({task:e,id:B,args:n})}),i?(r.then(i),this):r}}function ae(t,n,r){return n?typeof module<`u`?new(o()).Worker(__dirname+`/worker/node.js`):a(()=>import(`./__vite-browser-external-BxpbNHGG.js`).then(e(1)),[]).then(function(e){return new e.Worker(import.meta.dirname+`/node/node.mjs`)}):t?new window.Worker(URL.createObjectURL(new Blob([`onmessage=`+R.toString()],{type:`text/javascript`}))):new window.Worker(typeof r==`string`?r:import.meta.url.replace(`/worker.js`,`/worker/worker.js`).replace(`flexsearch.bundle.module.min.js`,`module/worker/worker.js`).replace(`flexsearch.bundle.module.min.mjs`,`module/worker/worker.js`),{type:`module`})}q.prototype.add=function(e,t,n){if(f(e)&&(t=e,e=p(t,this.key)),t&&(e||e===0)){if(!n&&this.reg.has(e))return this.update(e,t);for(let a=0,o;a<this.field.length;a++){o=this.B[a];var r=this.index.get(this.field[a]);if(typeof o==`function`){var i=o(t);i&&r.add(e,i,n,!0)}else i=o.G,(!i||i(t))&&(o.constructor===String?o=[``+o]:d(o)&&(o=[o]),se(t,o,this.D,0,r,e,o[0],n))}if(this.tag)for(r=0;r<this.A.length;r++){var a=this.A[r];i=this.tag.get(this.F[r]);let s=u();if(typeof a==`function`){if(a=a(t),!a)continue}else{var o=a.G;if(o&&!o(t))continue;a.constructor===String&&(a=``+a),a=p(t,a)}if(i&&a){d(a)&&(a=[a]);for(let t=0,r,c;t<a.length;t++)if(r=a[t],!s[r]&&(s[r]=1,(o=i.get(r))?c=o:i.set(r,c=[]),!n||!c.includes(e))){if(c.length===2**31-1){if(o=new j(c),this.fastupdate)for(let e of this.reg.values())e.includes(c)&&(e[e.indexOf(c)]=o);i.set(r,c=o)}c.push(e),this.fastupdate&&((o=this.reg.get(e))?o.push(c):this.reg.set(e,[c]))}}}if(this.store&&(!n||!this.store.has(e))){let r;if(this.h){r=u();for(let e=0,i;e<this.h.length;e++){if(i=this.h[e],(n=i.G)&&!n(t))continue;let a;if(typeof i==`function`){if(a=i(t),!a)continue;i=[i.O]}else if(d(i)||i.constructor===String){r[i]=t[i];continue}oe(t,r,i,0,i[0],a)}}this.store.set(e,r||t)}this.worker&&(this.fastupdate||this.reg.add(e))}return this};function oe(e,t,n,r,i,a){if(e=e[i],r===n.length-1)t[i]=a||e;else if(e)if(e.constructor===Array)for(t=t[i]=Array(e.length),i=0;i<e.length;i++)oe(e,t,n,r,i);else t=t[i]||(t[i]=u()),i=n[++r],oe(e,t,n,r,i)}function se(e,t,n,r,i,a,o,s){if(e=e[o])if(r===t.length-1){if(e.constructor===Array){if(n[r]){for(t=0;t<e.length;t++)i.add(a,e[t],!0,!0);return}e=e.join(` `)}i.add(a,e,s,!0)}else if(e.constructor===Array)for(o=0;o<e.length;o++)se(e,t,n,r,i,a,o,s);else o=t[++r],se(e,t,n,r,i,a,o,s)}function ce(e,t,n,r){if(!e.length)return e;if(e.length===1)return e=e[0],e=n||e.length>t?e.slice(n,n+t):e,r?K.call(this,e):e;let i=[];for(let a=0,o,s;a<e.length;a++)if((o=e[a])&&(s=o.length)){if(n){if(n>=s){n-=s;continue}o=o.slice(n,n+t),s=o.length,n=0}if(s>t&&(o=o.slice(0,t),s=t),!i.length&&s>=t)return r?K.call(this,o):o;if(i.push(o),t-=s,!t)break}return i=i.length>1?[].concat.apply([],i):i[0],r?K.call(this,i):i}function le(e,t,n,r){var i=r[0];if(i[0]&&i[0].query)return e[t].apply(e,i);if(!(t!==`and`&&t!==`not`||e.result.length||e.await||i.suggest))return r.length>1&&(i=r[r.length-1]),(r=i.resolve)?e.await||e.result:e;let a=[],o=0,s=0,c,l,u,d,f;for(t=0;t<r.length;t++)if(i=r[t]){var p=void 0;if(i.constructor===G)p=i.await||i.result;else if(i.then||i.constructor===Array)p=i;else{o=i.limit||0,s=i.offset||0,u=i.suggest,l=i.resolve,c=((d=i.highlight||e.highlight)||i.enrich)&&l,p=i.queue;let n=i.async||p,r=i.index,m=i.query;if(r?e.index||=r:r=e.index,m||i.tag){let o=i.field||i.pluck;if(o&&(!m||e.query&&!d||(e.query=m,e.field=o,e.highlight=d),r=r.index.get(o)),p&&(f||e.await)){f=1;let o,s=e.C.length,c=new Promise(function(e){o=e});(function(t,r){c.h=function(){r.index=null,r.resolve=!1;let i=n?t.searchAsync(r):t.search(r);return i.then?i.then(function(t){return e.C[s]=t=t.result||t,o(t),t}):(i=i.result||i,o(i),i)}})(r,Object.assign({},i)),e.C.push(c),a[t]=c;continue}else i.resolve=!1,i.index=null,p=n?r.searchAsync(i):r.search(i),i.resolve=l,i.index=r}else if(i.and)p=U(i,`and`,r);else if(i.or)p=U(i,`or`,r);else if(i.not)p=U(i,`not`,r);else if(i.xor)p=U(i,`xor`,r);else continue}p.await?(f=1,p=p.await):p.then?(f=1,p=p.then(function(e){return e.result||e})):p=p.result||p,a[t]=p}if(f&&!e.await&&(e.await=new Promise(function(t){e.return=t})),f){let t=Promise.all(a).then(function(r){for(let i=0;i<e.C.length;i++)if(e.C[i]===t){e.C[i]=function(){return n.call(e,r,o,s,c,l,u,d)};break}me(e)});e.C.push(t)}else if(e.await)e.C.push(function(){return n.call(e,a,o,s,c,l,u,d)});else return n.call(e,a,o,s,c,l,u,d);return l?e.await||e.result:e}function U(e,t,n){e=e[t];let r=e[0]||e;return r.index||=n,n=new G(r),e.length>1&&(n=n[t].apply(n,e.slice(1))),n}G.prototype.or=function(){return le(this,`or`,ue,arguments)};function ue(e,t,n,r,i,a,o){return e.length&&(this.result.length&&e.push(this.result),e.length<2?this.result=e[0]:(this.result=ge(e,t,n,!1,this.h),n=0)),i&&(this.await=null),i?this.resolve(t,n,r,o):this}G.prototype.and=function(){return le(this,`and`,de,arguments)};function de(e,t,n,r,i,a,o){if(!a&&!this.result.length)return i?this.result:this;let s;if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{let r=0;for(let t=0,n,i;t<e.length;t++)if((n=e[t])&&(i=n.length))r<i&&(r=i);else if(!a){r=0;break}r?(this.result=he(e,r,t,n,a,this.h,i),s=!0):this.result=[]}else a||(this.result=e);return i&&(this.await=null),i?this.resolve(t,n,r,o,s):this}G.prototype.xor=function(){return le(this,`xor`,fe,arguments)};function fe(e,t,n,r,i,a,o){if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{a:{a=n;var s=this.h;let r=[],o=u(),c=0;for(let t=0,n;t<e.length;t++)if(n=e[t]){c<n.length&&(c=n.length);for(let e=0,t;e<n.length;e++)if(t=n[e])for(let e=0,n;e<t.length;e++)n=t[e],o[n]=o[n]?2:1}for(let n=0,l,u=0;n<c;n++)for(let c=0,d;c<e.length;c++)if((d=e[c])&&(l=d[n])){for(let d=0,f;d<l.length;d++)if(f=l[d],o[f]===1)if(a)a--;else if(i){if(r.push(f),r.length===t){e=r;break a}}else{let i=n+(c?s:0);if(r[i]||(r[i]=[]),r[i].push(f),++u===t){e=r;break a}}}e=r}this.result=e,s=!0}else a||(this.result=e);return i&&(this.await=null),i?this.resolve(t,n,r,o,s):this}G.prototype.not=function(){return le(this,`not`,pe,arguments)};function pe(e,t,n,r,i,a,o){if(!a&&!this.result.length)return i?this.result:this;if(e.length&&this.result.length){a:{a=n;var s=[];e=new Set(e.flat().flat());for(let n=0,r,o=0;n<this.result.length;n++)if(r=this.result[n]){for(let c=0,l;c<r.length;c++)if(l=r[c],!e.has(l)){if(a)a--;else if(i){if(s.push(l),s.length===t){e=s;break a}}else if(s[n]||(s[n]=[]),s[n].push(l),++o===t){e=s;break a}}}e=s}this.result=e,s=!0}return i&&(this.await=null),i?this.resolve(t,n,r,o,s):this}function W(e,t,n,r,i){let a,o,s;typeof i==`string`?(a=i,i=``):a=i.template,o=a.indexOf(`$1`),s=a.substring(o+2),o=a.substring(0,o);let c=i&&i.boundary,l=!i||i.clip!==!1,u=i&&i.merge&&s&&o&&RegExp(s+` `+o,`g`);i&&=i.ellipsis;var d=0;if(typeof i==`object`){var f=i.template;d=f.length-2,i=i.pattern}typeof i!=`string`&&(i=i===!1?``:`...`),d&&(i=f.replace(`$1`,i)),f=i.length-d;let m,h;typeof c==`object`&&(m=c.before,m===0&&(m=-1),h=c.after,h===0&&(h=-1),c=c.total||9e5),d=new Map;for(let P=0,F,I,L;P<t.length;P++){let R;if(r)R=t,L=r;else{var g=t[P];if(L=g.field,!L)continue;R=g.result}I=n.get(L),F=I.encoder,g=d.get(F),typeof g!=`string`&&(g=F.encode(e),d.set(F,g));for(let e=0;e<R.length;e++){var _=R[e].doc;if(!_||(_=p(_,L),!_))continue;var v=_.trim().split(/\s+/);if(!v.length)continue;_=``;var y=[];let t=[];for(var b=-1,x=-1,S=0,C=0;C<v.length;C++){var w=v[C],T=F.encode(w);T=T.length>1?T.join(` `):T[0];let e;if(T&&w){for(var E=w.length,D=(F.split?w.replace(F.split,``):w).length-T.length,O=``,k=0,A=0;A<g.length;A++){var j=g[A];if(j){var M=j.length;M+=D<0?0:D,k&&M<=k||(j=T.indexOf(j),j>-1&&(O=(j?w.substring(0,j):``)+o+w.substring(j,j+M)+s+(j+M<E?w.substring(j+M):``),k=M,e=!0))}}O&&(c&&(b<0&&(b=_.length+(_?1:0)),x=_.length+(_?1:0)+O.length,S+=E,t.push(y.length),y.push({match:O})),_+=(_?` `:``)+O)}if(!e)w=v[C],_+=(_?` `:``)+w,c&&y.push({text:w});else if(c&&S>=c)break}if(S=t.length*(a.length-2),m||h||c&&_.length-S>c)if(S=c+S-f*2,C=x-b,m>0&&(C+=m),h>0&&(C+=h),C<=S)v=m?b-(m>0?m:0):b-((S-C)/2|0),y=h?x+(h>0?h:0):v+S,l||(v>0&&_.charAt(v)!==` `&&_.charAt(v-1)!==` `&&(v=_.indexOf(` `,v),v<0&&(v=0)),y<_.length&&_.charAt(y-1)!==` `&&_.charAt(y)!==` `&&(y=_.lastIndexOf(` `,y),y<x?y=x:++y)),_=(v?i:``)+_.substring(v,y)+(y<_.length?i:``);else{for(x=[],b={},S={},C={},w={},T={},O=D=E=0,A=k=1;;){var N=void 0;for(let e=0,n;e<t.length;e++){if(n=t[e],O)if(D!==O){if(C[e+1])continue;if(n+=O,b[n]){E-=f,S[e+1]=1,C[e+1]=1;continue}if(n>=y.length-1){if(n>=y.length){C[e+1]=1,n>=v.length&&(S[e+1]=1);continue}E-=f}if(_=y[n].text,M=h&&T[e])if(M>0){if(_.length>M)if(C[e+1]=1,l)_=_.substring(0,M);else continue;(M-=_.length)||(M=-1),T[e]=M}else{C[e+1]=1;continue}if(E+_.length+1<=c)_=` `+_,x[e]+=_;else if(l)N=c-E-1,N>0&&(_=` `+_.substring(0,N),x[e]+=_),C[e+1]=1;else{C[e+1]=1;continue}}else{if(C[e])continue;if(n-=D,b[n]){E-=f,C[e]=1,S[e]=1;continue}if(n<=0){if(n<0){C[e]=1,S[e]=1;continue}E-=f}if(_=y[n].text,M=m&&w[e])if(M>0){if(_.length>M)if(C[e]=1,l)_=_.substring(_.length-M);else continue;(M-=_.length)||(M=-1),w[e]=M}else{C[e]=1;continue}if(E+_.length+1<=c)_+=` `,x[e]=_+x[e];else if(l)N=_.length+1-(c-E),N>=0&&N<_.length&&(_=_.substring(N)+` `,x[e]=_+x[e]),C[e]=1;else{C[e]=1;continue}}else{_=y[n].match,m&&(w[e]=m),h&&(T[e]=h),e&&E++;let t;if(n?!e&&f&&(E+=f):(S[e]=1,C[e]=1),n>=v.length-1||n<y.length-1&&y[n+1].match?t=1:f&&(E+=f),E-=a.length-2,!e||E+_.length<=c)x[e]=_;else{N=k=A=S[e]=0;break}t&&(S[e+1]=1,C[e+1]=1)}E+=_.length,N=b[n]=1}if(N)D===O?O++:D++;else{if(D===O?k=0:A=0,!k&&!A)break;k?(D++,O=D):O++}}_=``;for(let e=0,t;e<x.length;e++)t=(S[e]?e?` `:``:(e&&!i?` `:``)+i)+x[e],_+=t;i&&!S[x.length]&&(_+=i)}u&&(_=_.replace(u,` `)),R[e].highlight=_}if(r)break}return t}function G(e,t){if(!this||this.constructor!==G)return new G(e,t);let n=0,r,i,a,o,s,c;if(e&&e.index){let r=e;if(t=r.index,n=r.boost||0,i=r.query){a=r.field||r.pluck,o=r.highlight;let n=r.resolve;e=r.async||r.queue,r.resolve=!1,r.index=null,e=e?t.searchAsync(r):t.search(r),r.resolve=n,r.index=t,e=e.result||e}else e=[]}if(e&&e.then){let t=this;e=e.then(function(e){t.C[0]=t.result=e.result||e,me(t)}),r=[e],e=[],s=new Promise(function(e){c=e})}this.index=t||null,this.result=e||[],this.h=n,this.C=r||[],this.await=s||null,this.return=c||null,this.highlight=o||null,this.query=i||``,this.field=a||``}s=G.prototype,s.limit=function(e){if(this.await){let t=this;this.C.push(function(){return t.limit(e).result})}else if(this.result.length){let t=[];for(let n=0,r;n<this.result.length;n++)if(r=this.result[n])if(r.length<=e){if(t[n]=r,e-=r.length,!e)break}else{t[n]=r.slice(0,e);break}this.result=t}return this},s.offset=function(e){if(this.await){let t=this;this.C.push(function(){return t.offset(e).result})}else if(this.result.length){let t=[];for(let n=0,r;n<this.result.length;n++)(r=this.result[n])&&(r.length<=e?e-=r.length:(t[n]=r.slice(e),e=0));this.result=t}return this},s.boost=function(e){if(this.await){let t=this;this.C.push(function(){return t.boost(e).result})}else this.h+=e;return this};function me(e,t){let n=e.result;var r=e.await;e.await=null;for(let t=0,i;t<e.C.length;t++)if(i=e.C[t]){if(typeof i==`function`)n=i(),e.C[t]=n=n.result||n,t--;else if(i.h)n=i.h(),e.C[t]=n=n.result||n,t--;else if(i.then)return e.await=r}return r=e.return,e.C=[],e.return=null,t||r(n),n}s.resolve=function(e,t,n,r,i){let a=this.await?me(this,!0):this.result;if(a.then){let o=this;return a.then(function(){return o.resolve(e,t,n,r,i)})}return a.length&&(typeof e==`object`?(r=e.highlight||this.highlight,n=!!r||e.enrich,t=e.offset,e=e.limit):(r||=this.highlight,n=!!r||n),a=i?n?K.call(this.index,a):a:ce.call(this.index,a,e||100,t,n)),this.finalize(a,r)},s.finalize=function(e,t){if(e.then){let n=this;return e.then(function(e){return n.finalize(e,t)})}t&&e.length&&this.query&&(e=W(this.query,e,this.index.index,this.field,t));let n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field=``,n&&n(e),e};function he(e,t,n,r,i,a,o){let s=e.length,c=[],l,d;l=u();for(let u=0,f,p,m,h;u<t;u++)for(let t=0;t<s;t++)if(m=e[t],u<m.length&&(f=m[u]))for(let e=0;e<f.length;e++){if(p=f[e],(d=l[p])?l[p]++:(d=0,l[p]=1),h=c[d]||(c[d]=[]),!o){let e=u+(t||!i?0:a||0);h=h[e]||(h[e]=[])}if(h.push(p),o&&n&&d===s-1&&h.length-r===n)return r?h.slice(r):h}if(e=c.length)if(i)c=c.length>1?ge(c,n,r,o,a):(c=c[0])&&n&&c.length>n||r?c.slice(r,n+r):c;else{if(e<s)return[];if(c=c[e-1],n||r)if(o)(c.length>n||r)&&(c=c.slice(r,n+r));else{i=[];for(let e=0,t;e<c.length;e++)if(t=c[e]){if(r&&t.length>r)r-=t.length;else if((n&&t.length>n||r)&&(t=t.slice(r,n+r),n-=t.length,r&&(r-=t.length)),i.push(t),!n)break}c=i}}return c}function ge(e,t,n,r,i){let a=[],o=u(),s;var c=e.length;let l;if(r){for(i=c-1;i>=0;i--)if(l=(r=e[i])&&r.length){for(c=0;c<l;c++)if(s=r[c],!o[s]){if(o[s]=1,n)n--;else if(a.push(s),a.length===t)return a}}}else for(let u=c-1,d,f=0;u>=0;u--){d=e[u];for(let e=0;e<d.length;e++)if(l=(r=d[e])&&r.length){for(let d=0;d<l;d++)if(s=r[d],!o[s])if(o[s]=1,n)n--;else{let n=(e+(u<c-1&&i||0))/(u+1)|0;if((a[n]||(a[n]=[])).push(s),++f===t)return a}}}return a}function _e(e,t,n,r,i){let a=u(),o=[];for(let e=0,n;e<t.length;e++){n=t[e];for(let e=0;e<n.length;e++)a[n[e]]=1}if(i){for(let t=0,i;t<e.length;t++)if(i=e[t],a[i]){if(r)r--;else if(o.push(i),a[i]=0,n&&--n===0)break}}else for(let n=0,r,i;n<e.result.length;n++)for(r=e.result[n],t=0;t<r.length;t++)i=r[t],a[i]&&((o[n]||(o[n]=[])).push(i),a[i]=0);return o}q.prototype.search=function(e,t,n,r){n||(!t&&f(e)?(n=e,e=``):f(t)&&(n=t,t=0));let i=[];var a=[];let o,s,c,u,p,m,h=0,g=!0,_;if(n){n.constructor===Array&&(n={index:n}),e=n.query||e,o=n.pluck,s=n.merge,u=n.boost,m=o||n.field||(m=n.index)&&(m.index?null:m);var v=this.tag&&n.tag;c=n.suggest,g=n.resolve!==!1,p=n.cache,_=g&&this.store&&n.highlight;var y=!!_||g&&this.store&&n.enrich;t=n.limit||t;var b=n.offset||0;if(t||=g?100:0,v&&(!this.db||!r)){v.constructor!==Array&&(v=[v]);var x=[];for(let e=0,t;e<v.length;e++)if(t=v[e],t.field&&t.tag){var S=t.tag;if(S.constructor===Array)for(var C=0;C<S.length;C++)x.push(t.field,S[C]);else x.push(t.field,S)}else{S=Object.keys(t);for(let e=0,n,r;e<S.length;e++)if(n=S[e],r=t[n],r.constructor===Array)for(C=0;C<r.length;C++)x.push(n,r[C]);else x.push(n,r)}if(v=x,!e){if(a=[],x.length)for(v=0;v<x.length;v+=2){if(this.db){if(r=this.index.get(x[v]),!r)continue;a.push(r=r.db.tag(x[v+1],t,b,y))}else r=ye.call(this,x[v],x[v+1],t,b,y);i.push(g?{field:x[v],tag:x[v+1],result:r}:[r])}if(a.length){let e=this;return Promise.all(a).then(function(t){for(let e=0;e<t.length;e++)g?i[e].result=t[e]:i[e]=t[e];return g?i:new G(i.length>1?he(i,1,0,0,c,u):i[0],e)})}return g?i:new G(i.length>1?he(i,1,0,0,c,u):i[0],this)}}g||o||!(m||=this.field)||(d(m)?o=m:(m.constructor===Array&&m.length===1&&(m=m[0]),o=m.field||m.index)),m&&m.constructor!==Array&&(m=[m])}m||=this.field;let w;x=(this.worker||this.db)&&!r&&[];for(let o=0,s,u,f;o<m.length;o++){if(u=m[o],this.db&&this.tag&&!this.B[o])continue;let E;if(d(u)||(E=u,u=E.field,e=E.query||e,t=l(E.limit,t),b=l(E.offset,b),c=l(E.suggest,c),_=g&&this.store&&l(E.highlight,_),y=!!_||g&&this.store&&l(E.enrich,y),p=l(E.cache,p)),r)s=r[o];else{S=E||n||{},C=S.enrich;var T=this.index.get(u);if(v&&(this.db&&(S.tag=v,S.field=m,w=T.db.support_tag_search),!w&&C&&(S.enrich=!1),w||(S.limit=0,S.offset=0)),s=p?T.searchCache(e,v&&!w?0:t,S):T.search(e,v&&!w?0:t,S),v&&!w&&(S.limit=t,S.offset=b),C&&(S.enrich=C),x){x[o]=s;continue}}if(f=(s=s.result||s)&&s.length,v&&f){if(S=[],C=0,this.db&&r){if(!w)for(T=m.length;T<r.length;T++){let e=r[T];if(e&&e.length)C++,S.push(e);else if(!c)return g?i:new G(i,this)}}else for(let e=0,t,n;e<v.length;e+=2){if(t=this.tag.get(v[e]),!t){if(c)continue;return g?i:new G(i,this)}if((t&&=t.get(v[e+1]))&&t.length)C++,S.push(t);else if(!c)return g?i:new G(i,this)}if(C){if(s=_e(s,S,t,b,g),f=s.length,!f&&!c)return g?s:new G(s,this);C--}}if(f)a[h]=u,i.push(s),h++;else if(m.length===1)return g?i:new G(i,this)}if(x){if(this.db&&v&&v.length&&!w)for(y=0;y<v.length;y+=2){if(a=this.index.get(v[y]),!a){if(c)continue;return g?i:new G(i,this)}x.push(a.db.tag(v[y+1],t,b,!1))}let r=this;return Promise.all(x).then(function(i){return n&&(n.resolve=g),i.length&&(i=r.search(e,t,n,i)),i})}if(!h)return g?i:new G(i,this);if(o&&(!y||!this.store))return i=i[0],g?i:new G(i,this);for(x=[],b=0;b<a.length;b++){if(v=i[b],y&&v.length&&v[0].doc===void 0&&(this.db?x.push(v=this.index.get(this.field[0]).db.enrich(v)):v=K.call(this,v)),o)return g?_?W(e,v,this.index,o,_):v:new G(v,this);i[b]={field:a[b],result:v}}if(y&&this.db&&x.length){let t=this;return Promise.all(x).then(function(n){for(let e=0;e<n.length;e++)i[e].result=n[e];return _&&(i=W(e,i,t.index,o,_)),s?ve(i):i})}return _&&(i=W(e,i,this.index,o,_)),s?ve(i):i};function ve(e){let t=[],n=u(),r=u();for(let i=0,a,o,s,c,l,u,d;i<e.length;i++){a=e[i],o=a.field,s=a.result;for(let e=0;e<s.length;e++)l=s[e],typeof l==`object`?c=l.id:l={id:c=l},(u=n[c])?u.push(o):(l.field=n[c]=[o],t.push(l)),(d=l.highlight)&&(u=r[c],u||(r[c]=u={},l.highlight=u),u[o]=d)}return t}function ye(e,t,n,r,i){return e=this.tag.get(e),!e||(e=e.get(t),!e)?[]:(t=e.length-r,t>0&&((n&&t>n||r)&&(e=e.slice(r,r+n)),i&&(e=K.call(this,e))),e)}function K(e){if(!this||!this.store)return e;if(this.db)return this.index.get(this.field[0]).db.enrich(e);let t=Array(e.length);for(let n=0,r;n<e.length;n++)r=e[n],t[n]={id:r,doc:this.store.get(r)};return t}function q(e){if(!this||this.constructor!==q)return new q(e);let t=e.document||e.doc||e,n,r;if(this.B=[],this.field=[],this.D=[],this.key=(n=t.key||t.id)&&xe(n,this.D)||`id`,(r=e.keystore||0)&&(this.keystore=r),this.fastupdate=!!e.fastupdate,this.reg=!this.fastupdate||e.worker||e.db?r?new N(r):new Set:r?new M(r):new Map,this.h=(n=t.store||null)&&n&&n!==!0&&[],this.store=n?r?new M(r):new Map:null,this.cache=(n=e.cache||null)&&new S(n),e.cache=!1,this.worker=e.worker||!1,this.priority=e.priority||4,this.index=be.call(this,e,t),this.tag=null,(n=t.tag)&&(typeof n==`string`&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let e=0,t,r;e<n.length;e++){if(t=n[e],r=t.field||t,!r)throw Error(`The tag field from the document descriptor is undefined.`);t.custom?this.A[e]=t.custom:(this.A[e]=xe(r,this.D),t.filter&&(typeof this.A[e]==`string`&&(this.A[e]=new String(this.A[e])),this.A[e].G=t.filter)),this.F[e]=r,this.tag.set(r,new Map)}}if(this.worker){this.fastupdate=!1,e=[];for(let t of this.index.values())t.then&&e.push(t);if(e.length){let t=this;return Promise.all(e).then(function(e){let n=0;for(let r of t.index.entries()){let i=r[0],a=r[1];a.then&&(a=e[n],t.index.set(i,a),n++)}return t})}}else e.db&&(this.fastupdate=!1,this.mount(e.db))}s=q.prototype,s.mount=function(e){let t=this.field;if(this.tag)for(let e=0,r;e<this.F.length;e++){r=this.F[e];var n=void 0;this.index.set(r,n=new X({},this.reg)),t===this.field&&(t=t.slice(0)),t.push(r),n.tag=this.tag.get(r)}n=[];let r={db:e.db,type:e.type,fastupdate:e.fastupdate};for(let i=0,a,o;i<t.length;i++){r.field=o=t[i],a=this.index.get(o);let s=new e.constructor(e.id,r);s.id=e.id,n[i]=s.mount(a),a.document=!0,i?a.bypass=!0:a.store=this.store}let i=this;return this.db=Promise.all(n).then(function(){i.db=!0})},s.commit=async function(){let e=[];for(let t of this.index.values())e.push(t.commit());await Promise.all(e),this.reg.clear()},s.destroy=function(){let e=[];for(let t of this.index.values())e.push(t.destroy());return Promise.all(e)};function be(e,t){let n=new Map,r=t.index||t.field||t;d(r)&&(r=[r]);for(let t=0,a,o;t<r.length;t++){if(a=r[t],d(a)||(o=a,a=a.field),o=f(o)?Object.assign({},e,o):e,this.worker){var i=void 0;i=(i=o.encoder)&&i.encode?i:new y(typeof i==`string`?k[i]:i||{}),i=new V(o,i),n.set(a,i)}this.worker||n.set(a,new X(o,this.reg)),o.custom?this.B[t]=o.custom:(this.B[t]=xe(a,this.D),o.filter&&(typeof this.B[t]==`string`&&(this.B[t]=new String(this.B[t])),this.B[t].G=o.filter)),this.field[t]=a}if(this.h){e=t.store,d(e)&&(e=[e]);for(let t=0,n,r;t<e.length;t++)n=e[t],r=n.field||n,n.custom?(this.h[t]=n.custom,n.custom.O=r):(this.h[t]=xe(r,this.D),n.filter&&(typeof this.h[t]==`string`&&(this.h[t]=new String(this.h[t])),this.h[t].G=n.filter))}return n}function xe(e,t){let n=e.split(`:`),r=0;for(let i=0;i<n.length;i++)e=n[i],e[e.length-1]===`]`&&(e=e.substring(0,e.length-2))&&(t[r]=!0),e&&(n[r++]=e);return r<n.length&&(n.length=r),r>1?n:n[0]}s.append=function(e,t){return this.add(e,t,!0)},s.update=function(e,t){return this.remove(e).add(e,t)},s.remove=function(e){f(e)&&(e=p(e,this.key));for(var t of this.index.values())t.remove(e,!0);if(this.reg.has(e)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){t=r[0];let i=r[1],a=i.indexOf(e);a>-1&&(i.length>1?i.splice(a,1):n.delete(t))}this.store&&this.store.delete(e),this.reg.delete(e)}return this.cache&&this.cache.remove(e),this},s.clear=function(){let e=[];for(let t of this.index.values()){let n=t.clear();n.then&&e.push(n)}if(this.tag)for(let e of this.tag.values())e.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),e.length?Promise.all(e):this},s.contain=function(e){return this.db?this.index.get(this.field[0]).db.has(e):this.reg.has(e)},s.cleanup=function(){for(let e of this.index.values())e.cleanup();return this},s.get=function(e){return this.db?this.index.get(this.field[0]).db.enrich(e).then(function(e){return e[0]&&e[0].doc||null}):this.store.get(e)||null},s.set=function(e,t){return typeof e==`object`&&(t=e,e=p(t,this.key)),this.store.set(e,t),this},s.searchCache=x,s.export=ke,s.import=Ae,ee(q.prototype);function Se(e,t=0){let n=[],r=[];t&&=25e4/t*5e3|0;for(let i of e.entries())r.push(i),r.length===t&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Ce(e,t){t||=new Map;for(let n=0,r;n<e.length;n++)r=e[n],t.set(r[0],r[1]);return t}function we(e,t=0){let n=[],r=[];t&&=25e4/t*1e3|0;for(let i of e.entries())r.push([i[0],Se(i[1])[0]||[]]),r.length===t&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Te(e,t){t||=new Map;for(let n=0,r,i;n<e.length;n++)r=e[n],i=t.get(r[0]),t.set(r[0],Ce(r[1],i));return t}function Ee(e){let t=[],n=[];for(let r of e.keys())n.push(r),n.length===25e4&&(t.push(n),n=[]);return n.length&&t.push(n),t}function De(e,t){t||=new Set;for(let n=0;n<e.length;n++)t.add(e[n]);return t}function Oe(e,t,n,r,i,a,o=0){let s=r&&r.constructor===Array;var c=s?r.shift():r;if(!c)return this.export(e,t,i,a+1);if((c=e((t?t+`.`:``)+(o+1)+`.`+n,JSON.stringify(c)))&&c.then){let l=this;return c.then(function(){return Oe.call(l,e,t,n,s?r:null,i,a,o+1)})}return Oe.call(this,e,t,n,s?r:null,i,a,o+1)}function ke(e,t,n=0,r=0){if(n<this.field.length){let i=this.field[n];if((t=this.index.get(i).export(e,i,n,r=1))&&t.then){let r=this;return t.then(function(){return r.export(e,i,n+1)})}return this.export(e,i,n+1)}let i,a;switch(r){case 0:i=`reg`,a=Ee(this.reg),t=null;break;case 1:i=`tag`,a=this.tag&&we(this.tag,this.reg.size),t=null;break;case 2:i=`doc`,a=this.store&&Se(this.store),t=null;break;default:return}return Oe.call(this,e,t,i,a||null,n,r)}function Ae(e,t){var n=e.split(`.`);n[n.length-1]===`json`&&n.pop();let r=n.length>2?n[0]:``;if(n=n.length>2?n[2]:n[1],this.worker&&r)return this.index.get(r).import(e);if(t){if(typeof t==`string`&&(t=JSON.parse(t)),r)return this.index.get(r).import(n,t);switch(n){case`reg`:this.fastupdate=!1,this.reg=De(t,this.reg);for(let e=0,t;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){t=[];for(let n of this.index.values())t.push(n.import(e));return Promise.all(t)}break;case`tag`:this.tag=Te(t,this.tag);break;case`doc`:this.store=Ce(t,this.store)}}}function je(e,t){let n=``;for(let r of e.entries()){e=r[0];let i=r[1],a=``;for(let e=0,n;e<i.length;e++){n=i[e]||[``];let r=``;for(let e=0;e<n.length;e++)r+=(r?`,`:``)+(t===`string`?`"`+n[e]+`"`:n[e]);r=`[`+r+`]`,a+=(a?`,`:``)+r}a=`["`+e+`",[`+a+`]]`,n+=(n?`,`:``)+a}return n}X.prototype.remove=function(e,t){let n=this.reg.size&&(this.fastupdate?this.reg.get(e):this.reg.has(e));if(n){if(this.fastupdate){for(let t=0,r,i;t<n.length;t++)if((r=n[t])&&(i=r.length))if(r[i-1]===e)r.pop();else{let t=r.indexOf(e);t>=0&&r.splice(t,1)}}else J(this.map,e),this.depth&&J(this.ctx,e);t||this.reg.delete(e)}return this.db&&(this.commit_task.push({del:e}),this.M&&Re(this)),this.cache&&this.cache.remove(e),this};function J(e,t){let n=0;var r=t===void 0;if(e.constructor===Array){for(let i=0,a,o,s;i<e.length;i++)if((a=e[i])&&a.length){if(r)return 1;if(o=a.indexOf(t),o>=0){if(a.length>1)return a.splice(o,1),1;if(delete e[i],n)return 1;s=1}else{if(s)return 1;n++}}}else for(let i of e.entries())r=i[0],J(i[1],t)?n++:e.delete(r);return n}var Me={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:`forward`},score:{resolution:9,context:{depth:2,resolution:3}}};X.prototype.add=function(e,t,n,r){if(t&&(e||e===0)){if(!r&&!n&&this.reg.has(e))return this.update(e,t);r=this.depth,t=this.encoder.encode(t,!r);let l=t.length;if(l){let d=u(),f=u(),p=this.resolution;for(let u=0;u<l;u++){let m=t[this.rtl?l-1-u:u];var i=m.length;if(i&&(r||!f[m])){var a=this.score?this.score(t,m,u,null,0):Ne(p,l,u),o=``;switch(this.tokenize){case`tolerant`:if(Y(this,f,m,a,e,n),i>2){for(let t=1,r,s,c,l;t<i-1;t++)r=m.charAt(t),s=m.charAt(t+1),c=m.substring(0,t)+s,l=m.substring(t+2),o=c+r+l,Y(this,f,o,a,e,n),o=c+l,Y(this,f,o,a,e,n);Y(this,f,m.substring(0,m.length-1),a,e,n)}break;case`full`:if(i>2){for(let r=0,c;r<i;r++)for(a=i;a>r;a--){o=m.substring(r,a),c=this.rtl?i-1-r:r;var s=this.score?this.score(t,m,u,o,c):Ne(p,l,u,i,c);Y(this,f,o,s,e,n)}break}case`bidirectional`:case`reverse`:if(i>1){for(s=i-1;s>0;s--){o=m[this.rtl?i-1-s:s]+o;var c=this.score?this.score(t,m,u,o,s):Ne(p,l,u,i,s);Y(this,f,o,c,e,n)}o=``}case`forward`:if(i>1){for(s=0;s<i;s++)o+=m[this.rtl?i-1-s:s],Y(this,f,o,a,e,n);break}default:if(Y(this,f,m,a,e,n),r&&l>1&&u<l-1)for(i=this.N,o=m,a=Math.min(r+1,this.rtl?u+1:l-u),s=1;s<a;s++){m=t[this.rtl?l-1-u-s:u+s],c=this.bidirectional&&m>o;let r=this.score?this.score(t,o,u,m,s-1):Ne(i+(l/2>i?0:1),l,u,a-1,s-1);Y(this,d,c?o:m,r,e,n,c?m:o)}}}}this.fastupdate||this.reg.add(e)}}return this.db&&(this.commit_task.push(n?{ins:e}:{del:e}),this.M&&Re(this)),this};function Y(e,t,n,r,i,a,o){let s,c;if(!(s=t[n])||o&&!s[o]){if(o?(t=s||(t[n]=u()),t[o]=1,c=e.ctx,(s=c.get(o))?c=s:c.set(o,c=e.keystore?new M(e.keystore):new Map)):(c=e.map,t[n]=1),(s=c.get(n))?c=s:c.set(n,c=s=[]),a){for(let n=0,a;n<s.length;n++)if((a=s[n])&&a.includes(i)){if(n<=r)return;a.splice(a.indexOf(i),1),e.fastupdate&&(t=e.reg.get(i))&&t.splice(t.indexOf(a),1);break}}if(c=c[r]||(c[r]=[]),c.push(i),c.length===2**31-1){if(t=new j(c),e.fastupdate)for(let n of e.reg.values())n.includes(c)&&(n[n.indexOf(c)]=t);s[r]=c=t}e.fastupdate&&((r=e.reg.get(i))?r.push(c):e.reg.set(i,[c]))}}function Ne(e,t,n,r,i){return n&&e>1?t+(r||0)<=e?n+(i||0):(e-1)/(t+(r||0))*(n+(i||0))+1|0:0}X.prototype.search=function(e,t,n){if(n||(t||typeof e!=`object`?typeof t==`object`&&(n=t,t=0):(n=e,e=``)),n&&n.cache)return n.cache=!1,e=this.searchCache(e,t,n),n.cache=!0,e;let r=[],i,a,o,s=0,c,l,d,f,p;n&&(e=n.query||e,t=n.limit||t,s=n.offset||0,a=n.context,o=n.suggest,p=(c=n.resolve)&&n.enrich,d=n.boost,f=n.resolution,l=this.db&&n.tag),c===void 0&&(c=this.resolve),a=this.depth&&a!==!1;let m=this.encoder.encode(e,!a);if(i=m.length,t||=c?100:0,i===1)return Fe.call(this,m[0],``,t,s,c,p,l);if(i===2&&a&&!o)return Fe.call(this,m[1],m[0],t,s,c,p,l);let h=u(),g=0,_;if(a&&(_=m[0],g=1),f||f===0||(f=_?this.N:this.resolution),this.db){if(this.db.search&&(n=this.db.search(this,m,t,s,o,c,p,l),n!==!1))return n;let e=this;return async function(){for(let t,n;g<i;g++){if((n=m[g])&&!h[n]){if(h[n]=1,t=await Le(e,n,_,0,0,!1,!1),t=Ie(t,r,o,f)){r=t;break}_&&(o&&t&&r.length||(_=n))}o&&_&&g===i-1&&!r.length&&(f=e.resolution,_=``,g=-1,h=u())}return Pe(r,f,t,s,o,d,c)}()}for(let e,t;g<i;g++){if((t=m[g])&&!h[t]){if(h[t]=1,e=Le(this,t,_,0,0,!1,!1),e=Ie(e,r,o,f)){r=e;break}_&&(o&&e&&r.length||(_=t))}o&&_&&g===i-1&&!r.length&&(f=this.resolution,_=``,g=-1,h=u())}return Pe(r,f,t,s,o,d,c)};function Pe(e,t,n,r,i,a,o){let s=e.length,c=e;if(s>1)c=he(e,t,n,r,i,a,o);else if(s===1)return o?ce.call(null,e[0],n,r):new G(e[0],this);return o?c:new G(c,this)}function Fe(e,t,n,r,i,a,o){return e=Le(this,e,t,n,r,i,a,o),this.db?e.then(function(e){return i?e||[]:new G(e,this)}):e&&e.length?i?ce.call(this,e,n,r):new G(e,this):i?[]:new G([],this)}function Ie(e,t,n,r){let i=[];if(e&&e.length){if(e.length<=r){t.push(e);return}for(let t=0,n;t<r;t++)(n=e[t])&&(i[t]=n);if(i.length){t.push(i);return}}if(!n)return i}function Le(e,t,n,r,i,a,o,s){let c;return n&&(c=e.bidirectional&&t>n)&&(c=n,n=t,t=c),e.db?e.db.get(t,n,r,i,a,o,s):(e=n?(e=e.ctx.get(n))&&e.get(t):e.map.get(t),e)}function X(e,t){if(!this||this.constructor!==X)return new X(e);if(e){var n=d(e)?e:e.preset;n&&(e=Object.assign({},Me[n],e))}else e={};n=e.context;let r=n===!0?{depth:1}:n||{},i=d(e.encoder)?k[e.encoder]:e.encode||e.encoder||{};this.encoder=i.encode?i:typeof i==`object`?new y(i):{encode:i},this.resolution=e.resolution||9,this.tokenize=n=(n=e.tokenize)&&n!==`default`&&n!==`exact`&&n||`strict`,this.depth=n===`strict`&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!e.fastupdate,this.score=e.score||null,(n=e.keystore||0)&&(this.keystore=n),this.map=n?new M(n):new Map,this.ctx=n?new M(n):new Map,this.reg=t||(this.fastupdate?n?new M(n):new Map:n?new N(n):new Set),this.N=r.resolution||3,this.rtl=i.rtl||e.rtl||!1,this.cache=(n=e.cache||null)&&new S(n),this.resolve=e.resolve!==!1,(n=e.db)&&(this.db=this.mount(n)),this.M=e.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=e.priority||4}s=X.prototype,s.mount=function(e){return this.commit_timer&&=(clearTimeout(this.commit_timer),null),e.mount(this)},s.commit=function(){return this.commit_timer&&=(clearTimeout(this.commit_timer),null),this.db.commit(this)},s.destroy=function(){return this.commit_timer&&=(clearTimeout(this.commit_timer),null),this.db.destroy()};function Re(e){e.commit_timer||=setTimeout(function(){e.commit_timer=null,e.db.commit(e)},1)}s.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},s.append=function(e,t){return this.add(e,t,!0)},s.contain=function(e){return this.db?this.db.has(e):this.reg.has(e)},s.update=function(e,t){let n=this,r=this.remove(e);return r&&r.then?r.then(()=>n.add(e,t)):this.add(e,t)},s.cleanup=function(){return this.fastupdate?(J(this.map),this.depth&&J(this.ctx),this):this},s.searchCache=x,s.export=function(e,t,n=0,r=0){let i,a;switch(r){case 0:i=`reg`,a=Ee(this.reg);break;case 1:i=`cfg`,a=null;break;case 2:i=`map`,a=Se(this.map,this.reg.size);break;case 3:i=`ctx`,a=we(this.ctx,this.reg.size);break;default:return}return Oe.call(this,e,t,i,a,n,r)},s.import=function(e,t){if(t)switch(typeof t==`string`&&(t=JSON.parse(t)),e=e.split(`.`),e[e.length-1]===`json`&&e.pop(),e.length===3&&e.shift(),e=e.length>1?e[1]:e[0],e){case`reg`:this.fastupdate=!1,this.reg=De(t,this.reg);break;case`map`:this.map=Ce(t,this.map);break;case`ctx`:this.ctx=Te(t,this.ctx)}},s.serialize=function(e=!0){let t=``,n=``,r=``;if(this.reg.size){let e;for(var i of this.reg.keys())e||=typeof i,t+=(t?`,`:``)+(e===`string`?`"`+i+`"`:i);t=`index.reg=new Set([`+t+`]);`,n=je(this.map,e),n=`index.map=new Map([`+n+`]);`;for(let t of this.ctx.entries()){i=t[0];let n=je(t[1],e);n=`new Map([`+n+`])`,n=`["`+i+`",`+n+`]`,r+=(r?`,`:``)+n}r=`index.ctx=new Map([`+r+`]);`}return e?`function inject(index){`+t+n+r+`}`:t+n+r},ee(X.prototype);var ze=typeof window<`u`&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Z=[`map`,`ctx`,`tag`,`reg`,`cfg`],Q=u();function Be(e,t={}){if(!this||this.constructor!==Be)return new Be(e,t);typeof e==`object`&&(t=e,e=e.name),e||console.info(`Default storage space was used, because a name was not passed.`),this.id=`flexsearch`+(e?`:`+e.toLowerCase().replace(/[^a-z0-9_\-]/g,``):``),this.field=t.field?t.field.toLowerCase().replace(/[^a-z0-9_\-]/g,``):``,this.type=t.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}s=Be.prototype,s.mount=function(e){return e.index?e.mount(this):(e.db=this,this.open())},s.open=function(){if(this.db)return this.db;let e=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Q[e.id]||(Q[e.id]=[]),Q[e.id].push(e.field);let t=ze.open(e.id,1);return t.onupgradeneeded=function(){let t=e.db=this.result;for(let n=0,r;n<Z.length;n++){r=Z[n];for(let n=0,i;n<Q[e.id].length;n++)i=Q[e.id][n],t.objectStoreNames.contains(r+(r===`reg`?``:i?`:`+i:``))||t.createObjectStore(r+(r===`reg`?``:i?`:`+i:``))}},e.db=$(t,function(t){e.db=t,e.db.onversionchange=function(){e.close()}})},s.close=function(){this.db&&this.db.close(),this.db=null},s.destroy=function(){return $(ze.deleteDatabase(this.id))},s.clear=function(){let e=[];for(let t=0,n;t<Z.length;t++){n=Z[t];for(let t=0,r;t<Q[this.id].length;t++)r=Q[this.id][t],e.push(n+(n===`reg`?``:r?`:`+r:``))}let t=this.db.transaction(e,`readwrite`);for(let n=0;n<e.length;n++)t.objectStore(e[n]).clear();return $(t)},s.get=function(e,t,n=0,r=0,i=!0,a=!1){e=this.db.transaction((t?`ctx`:`map`)+(this.field?`:`+this.field:``),`readonly`).objectStore((t?`ctx`:`map`)+(this.field?`:`+this.field:``)).get(t?t+`:`+e:e);let o=this;return $(e).then(function(e){let t=[];if(!e||!e.length)return t;if(i){if(!n&&!r&&e.length===1)return e[0];for(let i=0,a;i<e.length;i++)if((a=e[i])&&a.length){if(r>=a.length){r-=a.length;continue}let e=n?r+Math.min(a.length-r,n):a.length;for(let n=r;n<e;n++)t.push(a[n]);if(r=0,t.length===n)break}return a?o.enrich(t):t}return e})},s.tag=function(e,t=0,n=0,r=!1){e=this.db.transaction(`tag`+(this.field?`:`+this.field:``),`readonly`).objectStore(`tag`+(this.field?`:`+this.field:``)).get(e);let i=this;return $(e).then(function(e){return!e||!e.length||n>=e.length?[]:!t&&!n?e:(e=e.slice(n,n+t),r?i.enrich(e):e)})},s.enrich=function(e){typeof e!=`object`&&(e=[e]);let t=this.db.transaction(`reg`,`readonly`).objectStore(`reg`),n=[];for(let r=0;r<e.length;r++)n[r]=$(t.get(e[r]));return Promise.all(n).then(function(t){for(let n=0;n<t.length;n++)t[n]={id:e[n],doc:t[n]?JSON.parse(t[n]):null};return t})},s.has=function(e){return e=this.db.transaction(`reg`,`readonly`).objectStore(`reg`).getKey(e),$(e).then(function(e){return!!e})},s.search=null,s.info=function(){},s.transaction=function(e,t,n){e+=e===`reg`?``:this.field?`:`+this.field:``;let r=this.h[e+`:`+t];if(r)return n.call(this,r);let i=this.db.transaction(e,t);this.h[e+`:`+t]=r=i.objectStore(e);let a=n.call(this,r);return this.h[e+`:`+t]=null,$(i).finally(function(){return a})},s.commit=async function(e){let t=e.commit_task,n=[];e.commit_task=[];for(let e=0,r;e<t.length;e++)r=t[e],r.del&&n.push(r.del);n.length&&await this.remove(n),e.reg.size&&(await this.transaction(`map`,`readwrite`,function(t){for(let n of e.map){let e=n[0],r=n[1];r.length&&(t.get(e).onsuccess=function(){let n=this.result;var i;if(n&&n.length){let e=Math.max(n.length,r.length);for(let t=0,a,o;t<e;t++)if((o=r[t])&&o.length){if((a=n[t])&&a.length)for(i=0;i<o.length;i++)a.push(o[i]);else n[t]=o;i=1}}else n=r,i=1;i&&t.put(n,e)})}}),await this.transaction(`ctx`,`readwrite`,function(t){for(let n of e.ctx){let e=n[0],r=n[1];for(let n of r){let r=n[0],i=n[1];i.length&&(t.get(e+`:`+r).onsuccess=function(){let n=this.result;var a;if(n&&n.length){let e=Math.max(n.length,i.length);for(let t=0,r,o;t<e;t++)if((o=i[t])&&o.length){if((r=n[t])&&r.length)for(a=0;a<o.length;a++)r.push(o[a]);else n[t]=o;a=1}}else n=i,a=1;a&&t.put(n,e+`:`+r)})}}}),e.store?await this.transaction(`reg`,`readwrite`,function(t){for(let n of e.store){let e=n[0],r=n[1];t.put(typeof r==`object`?JSON.stringify(r):1,e)}}):e.bypass||await this.transaction(`reg`,`readwrite`,function(t){for(let n of e.reg.keys())t.put(1,n)}),e.tag&&await this.transaction(`tag`,`readwrite`,function(t){for(let n of e.tag){let e=n[0],r=n[1];r.length&&(t.get(e).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(r):r,t.put(n,e)})}}),e.map.clear(),e.ctx.clear(),e.tag&&e.tag.clear(),e.store&&e.store.clear(),e.document||e.reg.clear())};function Ve(e,t,n){let r=e.value,i,a=0;for(let e=0,o;e<r.length;e++){if(o=n?r:r[e]){for(let n=0,a,s;n<t.length;n++)if(s=t[n],a=o.indexOf(s),a>=0)if(i=1,o.length>1)o.splice(a,1);else{r[e]=[];break}a+=o.length}if(n)break}a?i&&e.update(r):e.delete(),e.continue()}s.remove=function(e){return typeof e!=`object`&&(e=[e]),Promise.all([this.transaction(`map`,`readwrite`,function(t){t.openCursor().onsuccess=function(){let t=this.result;t&&Ve(t,e)}}),this.transaction(`ctx`,`readwrite`,function(t){t.openCursor().onsuccess=function(){let t=this.result;t&&Ve(t,e)}}),this.transaction(`tag`,`readwrite`,function(t){t.openCursor().onsuccess=function(){let t=this.result;t&&Ve(t,e,!0)}}),this.transaction(`reg`,`readwrite`,function(t){for(let n=0;n<e.length;n++)t.delete(e[n])})])};function $(e,t){return new Promise((n,r)=>{e.onsuccess=e.oncomplete=function(){t&&t(this.result),t=null,n(this.result)},e.onerror=e.onblocked=r,e=null})}var He={Index:X,Charset:k,Encoder:y,Document:q,Worker:V,Resolver:G,IndexedDB:Be,Language:{}};export{o as n,a as r,He as t};